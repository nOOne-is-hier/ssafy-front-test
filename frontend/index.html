<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>ChatGPT-like App</title>
        <link rel="stylesheet" href="./src/styles.css" />
    </head>

    <body class="h-screen flex flex-col bg-gray-100">
        <!-- Header -->
        <header
            class="p-4 bg-gradient-to-r from-green-700 via-teal-600 to-gray-800 text-white flex items-center justify-between">
            <div class="flex items-center space-x-4">
                <div style="background-color: aliceblue;">
                    <img src="./icon.png" alt="Logo" class="w-8 h-8" />
                </div>
                <button
                    id="new-chat-btn"
                    class="bg-white text-gray-700 px-3 py-1 rounded hover:bg-gray-200 transition">
                    New Chat
                </button>
            </div>
        </header>

        <!-- Main chat area -->
        <main id="chat-container"
            class="flex-1 overflow-y-auto p-4 chat-scroll">
            <!-- Messages will be dynamically inserted here -->
        </main>
        <div class="loading">
            <img class="loading-img" src="./loading.gif" alt="loading">
        </div>

        <!-- Input area with endpoint selector -->
        <footer class="border-t border-gray-300 bg-white p-4">
            <form id="message-form"
                class="flex items-center space-x-2 relative">
                <input type="text" id="user-input"
                    class="flex-1 border border-gray-300 rounded-md p-2 outline-none focus:border-blue-500"
                    placeholder="Type your message..." required />
                <select id="api-selector"
                    class="border border-gray-300 rounded-md p-2">
                    <option value="1" selected>임시1</option>
                    <option value="2">임시2</option>
                    <option value="3">임시3</option>
                </select>
                <button type="submit"
                    class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition">
                    Send
                </button>
                <div
                    class="loading absolute top-full mt-4 left-1/2 transform -translate-x-1/2 hidden">
                    <img class="loading-img" src="./loading.gif" alt="loading">
                </div>
            </form>
        </footer>

        <div
            class="loading fixed inset-0 items-center justify-center bg-gray-900 bg-opacity-50 z-50 hidden">
            <img class="loading-img" src="./loading.gif" alt="loading">
        </div>
        <script type="module" src="./src/app.js"></script>
    </body>

    <style>
    .loading {
        display: none; /* 기본적으로 숨김 */
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        align-items: center;
        justify-content: center;
        background-color: rgba(255, 255, 255, 0.8); /* 밝은 배경 */
        padding: 1rem;
        border-radius: 0.5rem;
        z-index: 1000;
        animation: fadeIn 0.3s ease-in-out;
    }

    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }

    .loading-img {
        width: 3rem;
        height: 3rem;
        animation: spin 1s linear infinite;
    }

    @keyframes spin {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
    }

</style>

</html>